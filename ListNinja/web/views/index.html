
<!--
   To change this template, choose Tools | Templates
   and open the template in the editor.
   -->
<!DOCTYPE html>
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
      <meta charset="UTF-8"/>
      <title>List Ninja Login and signup - CodePen</title>
      <meta name="robots" content="noindex"/>
      <link rel='stylesheet prefetch' href='https://s3-us-west-2.amazonaws.com/s.cdpn.io/64754/bootstrap.min.css'/>
      <link rel="stylesheet" href="assets/stylesheets/index.css" media="screen" type="text/css" />
      <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'/>
      <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
      <script src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/64754/bootstrap.js'></script>
      <script src="assets/javascripts/index.js"></script>
   </head>
   <body>
<script type="text/javascript">

  function statusChangeCallback(response) {
    console.log('called statusChangeCallback');
    console.log("status: ", response.status);
    console.log('response: ', response);
    
    if (response.status === 'connected') {
      FB.api('/me', function(response) {
        console.log('Successful login! Response: ', response);
        /*
        $.ajax({
          type : "POST",
          url : "/ListNinja/CreateUser",
          data: {email: response.email, id: response.id, name:response.name},
          success : function(data) {
            console.log("success: ", data);
            $.ajax()
          },
          error: function (xhr, ajaxOptions, thrownError) {
            alert(xhr.status);
            alert(thrownError);
          }  
        });
        */
      }); 
    } else if (response.status === 'not_authorized') {
      console.log('User is logged into Facebook, but not your app.');
    } else {
      console.log('User is not logged into Facebook, so we\'re not sure if they are logged into this app or not.');
    }
  }

  function checkLoginState() {
    console.log('called checkLoginState');
    FB.getLoginStatus(function(response) {
      statusChangeCallback(response);
    });
  }

  window.fbAsyncInit = function() {
    FB.init({
      appId      : '1487237978203661',
      cookie     : true,  // enable cookies to allow the server to access the session
      xfbml      : true,
      version    : 'v2.1'
    });
  };

  (function(d, s, id){
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }
    (document, 'script', 'facebook-jssdk')
  );

</script>
      <div class="jumbotron">
        <div class="container">
          <div class="row">
             <div id="status">
                <div class="col-sm-8">
                   <img id="logo" class="img-responsive logo" src="assets/images/list-ninja.png" />
                </div>

                <div class="col-sm-4">
                  <div class="login-container">
                    <h1>Login with Facebook</h1>
                    <div class="fb-login-button btn" data-max-rows="1" data-scope="user_friends,email" data-size="xlarge" onlogin="checkLoginState();" data-show-faces="true" data-auto-logout-link="true"></div>
                  </div>
                </div>
             </div>
          </div>
        </div>
      </div>
    </body> 
</html>